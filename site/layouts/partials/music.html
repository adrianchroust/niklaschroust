{{ $ := .page }}
{{ with .element }}
	{{ $lang := index . $.Lang }}
	{{ $piece := partial "search-music-piece" (dict "page" $ "title" .title) }}

	<section class="music js-music" id="{{ $piece.anchor }}">
		{{ if ne $piece.title .title }}<h2 class="music__original-title">{{ .title }}</h2>{{ end }}
		<h1 class="music__title">{{ $piece.title }}</h1>
		<h3 class="music__additional">{{ .year }}, {{ i18n "opus" }} {{ .opus }}</h3>
		<p class="music__instruments">{{ $lang.instruments }}</p>
		<div class="music__description js-description">{{ $lang.description | markdownify }}</div>
		<p class="music__view">
			{{- with .audio }}<a class="music__view-item js-audio" target="_blank" href="/music/audio/{{ . }}">{{ i18n "listen" }}</a>{{ end -}}
			{{- with .pdf }}<a class="music__view-item" target="_blank" href="/music/pdf/{{ . }}">{{ i18n "view" }}</a>{{ end -}}
			<button class="music__readmore js-readmore">{{ i18n "readmore" }}</button>
		</p>
		{{ with .children }}
			{{ range . }}
				{{ partial "music" (dict "page" $ "element" .) }}
			{{ end }}
		{{ end }}
	</section>
{{ end }}
